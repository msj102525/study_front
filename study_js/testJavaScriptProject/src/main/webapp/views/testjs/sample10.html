<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>sample10</title>
<script type="text/javascript">
	function execute() {
		// first 와 second 의 결과를 합쳐서 result에 보여주기
		var first = document.getElementById('first');
		var second = document.getElementById('second');

		/* 조건에 맞는 값인지 확인할 때 정규표현식 사용할 수 있음
			정규표현식 작성방법
			1. var 변수 = /정규표현식/;
			2. var 변수 = new RegExp('정규표현식');
		 */

		// first 와 second에 입력된 값이 숫자로만 구성되어 있는지 검사
		var re = /^[0-9]+$/;
		if (!re.test(first.value)) {
			// 숫자가 아닌값이 있는 경우
			alert('숫자만 입력하여야 합니다.')
			first.value = ""; // first 에 기록된 값 징기
			first.focus(); // 입력 커서가 first input 에 표시되게 함
			return;
		}

		if (!re.test(second.value)) {
			// 숫자가 아닌값이 있는 경우
			alert('숫자만 입력하여야 합니다.')
			second.value = ""; // first 에 기록된 값 징기
			second.focus(); // 입력 커서가 first input 에 표시되게 함
			return;
		}

		var result = Number(first.value) + Number(second.value);
		document.getElementById("result").innerHTML = result;
	}
	
	// 회원가입 정보 전송 전에 유효성 검사
	function validate() {
		var userid = document.getElementById('userid');
		var userpwd1 = document.getElementById('userpwd');
		var userpwd2 = document.getElementById('userpwd2');
		var username = document.getElementById('username');
		var email = document.getElementById('email');
		var phone = document.getElementById('phone');
		
		// 암호와 암호 확인이 일치하는지 검사
		if(userpwd1.value != userpwd2.value) {
			alert('암호와 암호확인이 일치하지 않습니다.');
			userpwd1.select(); // input 입력값을 선택상태로 바꿈
			return false; // 전송 취소 (submit 이벤트 취소함)
		}
		
		// 아이디 검사
		/*
			첫글자는 반드시 영어소문자로, 4글자 이상 12글자 이하로 구성 숫자 하나이상 포함되게 작성
			Meta 문자 : 영어소문자와 숫자로만 구성할 경우
					\d == [0-9]
					{3, 7} : 3자 이상 7자 이하
		*/
		if(!check(/^[a-z][a-z\d]{4,12}$/, userid,
				'첫 글자는 반드시 영어소문자로 시작, 4글자 이상 12글자 이하고 숫자 하나 이상 포함되게 구성하세요!')){
			return false; // 전송 취소
		}
					
		// 이름검사 : 2글자 이상, 한글로만 구성할 것
		if(!check(/^[ㄱ-ㅎ|ㅏ-ㅣ|가-힝]{2,}$/, username, '한글로 2글자 이상으로 입력하세요')) {
			return false;
		}
			
		// 이메일 검사 : 아이디가 4글자 이상, \w == [a-zA-Z0-9]
		//@ 문자 다음에는 [\w-\.] 로 1글자이상 주소가 .표시가 1 ~ 3번 반복되는지 검사
		if(!check(/^[\w]{4,}@[\w]+(\.[\w-]+){1,3}$/, email, '이메일 입력 형식이 잘못되었습니다')) {
			return false; // 전송 취소
		}
	}
	
	//검사를 모두 통과하면
	return true; // 전송보냄
	
	// 정규표현식과 일치하는지 검사하는 함수
	function check(re, element, message) {
		if(re.test(element.value)) {
			return true;
		}
		
		// 조건을 만족하지 않는 경우
		alert(message);
		element.value = ''; // 해당 input의 입력값 지우기
		element.focus();
		return false;
	}
</script>
</head>
<body>
	<h1>from 태그 input의 입력값에 대한 유효성 검사와 정규표현식 적용 테스트</h1>
	<h3>전송값에 대한 유효성 검사(validation)란, 서버로 전송하기 전에 클라이언트 브라우저에서 전송값에 이상이
		없는지 또는 조건을 만족하는 유효한 값인지를 검사하는 것을 말함, 즉 확인된 유효한 값만 서버로 보냄</h3>
	<input type="button" value="결과확인" onclick="execute();">
	<br>
	<input type="text" id="first"> +
	<input type="text" id="second"> =
	<span id="result"></span>
	<br>
	<hr>

	<h3>회원 가입 유효성 체크</h3>
	<form action="" method="post" onsubmit="return validate();">
		<label for="userid">아이디 : </label> <input type="text" name="userid"
			id="userid"> <br> <label for="username">이름 : </label> <input
			type="text" name="username" id="username"> <br> <label
			for="userpwd">암호 : </label> <input type="password" name="userpwd"
			id="userpwd"> <br> <label for="userpwd2">암호확인 :
		</label> <input type="password" id="userpwd2"> <br> <label
			for="email">이메일 : </label> <input type="email" name="email"
			id="email"> <br> <label for="phone">전화번호 : </label> <input
			type="tel" name="phone" id="phone"> <br> <label
			for="job">직업 : </label> <select name="job" id="job">
			<option value="dba">데이터베이스 관리자</option>
			<option value="developer">프로그래머</option>
			<option value="da">빅데이터 분석가</option>
		</select> <br> <label for="gender">성별 : </label> <input type="radio"
			name="gender" value="남"> 남자 &nbsp; <input type="radio"
			name="gender" value="여"> 여자 <label>취미 : </label> <input
			type="checkbox" name="hobby" value="독서"> 독서 &nbsp; <input
			type="checkbox" name="hobby" value="요리"> 요리 &nbsp; <input
			type="checkbox" name="hobby" value="여행"> 여행 <br> <input
			type="checkbox" name="hobby" value="음악"> 음악 &nbsp; <input
			type="checkbox" name="hobby" value="운동"> 운동 &nbsp; <input
			type="checkbox" name="hobby" value="기타"> 기타 &nbsp; <input
			type="reset" value="입력취소"> &nbsp; <input type="submit"
			value="가입하기">
	</form>

</body>
</html>